# 激光器与遮光挡板控制系统

## 控制系统方案总体概述

控制两台激光器出光的同时控制三个遮光挡板挡光

## 遮光挡板控制系统

### 方案概述

PC与三块单片机交换数据，控制步进电机前后运动从而带动遮光挡板遮挡光路

### 硬件选型

STM8S103F单片机 * 3 小型滑台导轨微型步进电机 * 3 承托盘、遮光挡板 * 3 铝盒、太空插头 * 3 RS232转TTL芯片 * 3 UsB转RS232一拖4 驱动芯片 * 3

### 硬件连接

RS232转TTL芯片接STM8S单片机接驱动芯片接步进电机。 将各个芯片的5V电源单独引出通过太空插头连接到大控制盒集成的电源模块上。三个太空接头连接到最下面三个孔

### 错误检测

检测工具：万用表，示波器 检测方法：**断电情况下**：检查串口连接即TXD、RXD的连接 使用万用表的蜂鸣档检查电路连接 使用万用表的直流电压档检查控制芯片和驱动芯片的输出是否为0 **通电情况下：**使用示波器检查串口是否有发送或者接收数据 使用万用表的直流电压档检查芯片和驱动的输出是否准确 若出现电机卡住的现象，使用示波器检查为单片机供电的5V电压是否稳 定，若电压不稳应及时更换电源

### 控制程序

串口助手每隔0.5秒就会接收到0x1f的报文以此来判断串口是否接通。 发送0x0f前进，发送0x00前进，发送0x0A停止

## 激光器控制系统

### 方案概述

PC利用单片机拓展串口与两台激光器通讯控制进出光

### 硬件选型

Nimma900固体激光器 Brilliant固体激光器 STM32F4*1 铝盒 * 1 RS232转TTL芯片 * 3

### 硬件连接

USB转RS232——>RS232转TTL——>STM32F4——>两个TTL转RS232——>两个激光器RS232协议接口 CLK IN外部灯控制线和Q IN Q信号控制线与两个插头连接。 接稳压模块提供5V电源为单片机供电。

### 激光器的控制协议与步骤

进入PC外控模式，设定灯信号与Q信号的延时。利用232协议控制激光器开预燃，开工作，利用BNCTTL两个接口发射激光。 Nimma900激光器： 开工作步骤： 联机下传->设置电压->设置频率->开预燃->开工作->开Q 联机下传011100000000CC33C33C 设置电压0122**0290**0000CC33C33C 黑体中电压为660V（电压不要低于500V，否则测不到激光） 设置频率 014400**05**0000CC33C33C 黑体中为频率为5HZ 开预燃 015500550000CC33C33C 即standby 开工作 016600660000CC33C33C 即开氙灯即flash 开Q 01bb00bb0000CC33C33C 关工作步骤： 停工作下传->关预燃下传->联机断开下传 关Q 01bb00bb0000CC33C33C 停工作下传：016600000000CC33C33C 关预燃下传：015500000000CC33C33C 联机断开下传：011100110000CC33C33C Brilliant激光器： 开工作步骤： 设置电压，频率->设置外触发模式->亮灯——>发射激光 读取激光器当前的状态：WOR”CRLF” simmer 预燃 设置电压：V920 “CRLF” 设置频率，步长：UF0 “CRLF” 设置外触发模式：E “CRLF” 亮灯：A “CRLF” 发射激光：CC 关工作步骤：S”CRLF” 停止发射激光
